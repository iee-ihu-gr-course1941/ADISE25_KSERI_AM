## <u>Περιεχόμενα</u>
- <u> **[Περιγραφή Παιχνιδιού](#περιγραφή-παιχνιδιού)**</u>
- <u>**[Περιγραφή API](#περιγραφή-api)**</u>
    - <u>**[Methods](#methods)**</u>
        - <u>**[Board](#board)**</u>
            - <u>[Ανάγνωση board](#ανάγνωση-board)</u>
            - <u>[Αρχικοποίηση board](#αρχικοποίηση-board)</u>
            - <u>[Παίξιμο φύλλου](#παίξιμο-φύλλου)</u>
        - <u>**[Player](#player)**</u>
            - <u>[Λίστα παικτών](#λίστα-παικτών)</u>
            - <u>[Ανάγνωση στοιχείων παίκτη](#ανάγνωση-στοιχείων-παίκτη)</u>
            - <u>[Αρχικοποίηση στοιχείων παίκτη](#αρχικοποίηση-στοιχείων-παίκτη)</u>
        - <u>**[Επαναφορά παιχνιδιού](#επαναφορά-παιχνιδιού)**</u>
        
- <u>**[Πίνακες Βάσης Δεδομένων](#πίνακες-βάσης-δεδομένων)**</u>
   - <u>**[board](#1-board)**</u>
   - <u>**[deck](#2-deck)**</u>
   - <u>**[players](#3-players)**</u>
   - <u>**[game-status](#4-game_status)**</u>
   
- <u>**[Περιγραφή Frontend](#περιγραφή-frontend)**</u>
   - <u>**[HTML](#1-html)**</u>
   - <u>**[Javascript](#2-javascript)**</u>

---


# Περιγραφή παιχνιδιού
Η Ξερή αποτελεί ένα δημοφιλές ελληνικό παιχνίδι τράπουλας. Παίζεται με 2 παίκτες και σκοπός είναι να μαζέψεις όσο περισσότερα φύλλα μπορείς και αν γίνεται να κάνεις ξερή. Σε κάθε μοίρασμα, κάθε παίκτης λαμβάνει 6 φύλλα. 


Για να μαζέψεις φύλλα από το τραπέζι, θα πρέπει είτε α) να ρίξεις ένα φύλλο με ίδια φιγούρα με το φύλλο που βρίσκεται τελευταίο στο τραπέζι( π.χ. να ρίξεις 5 πάνω σε 5) , είτε β) να ρίξεις Βαλέ(J). Μόνο αν στο τραπέζι βρίσκεται ένα μόνο φύλλο και ρίξεις φύλλο ίδιας φιγούρας, κάνεις ξερή. 


Συνολικά υπάρχουν 25 βασικοί πόντοι, οι οποίοι μοιράζονται ως εξής:
20 πόντοι -> 1 για κάθε φύλλο με φιγούρα άσσο(A), ρήγα(K), ντάμα(Q), βαλέ(J) ή 10.
1 πόντος -> 10 καρό
1 πόντος -> 2 σπαθί
3 πόντοι -> όποιος έχει μαζέψει τα περισσότερα φύλλα
10 πόντοι -> απλή ξερή
20 πόντοι -> ξερή με βαλέ

# Συντελεστές 
Μαρία-Θεοδοσία Κωνσταντινίδου 2021075


Αγγελική Σιμιγδάλη 2021154

# Περιγραφή API
## <u>Methods</u>

---

### <u>Board<u>

### **Ανάγνωση board**
`GET /board/`

<br> Επιστρέφει την τρέχουσα κατάσταση της τράπουλας και των θέσεων όλων των καρτών στο τραπέζι.

### **Αρχικοποίηση board**
`POST /board/`

<br> Αρχικοποιεί το Board. Γίνονται reset όλες οι κάρτες (επιστροφή στο deck) και προετοιμάζεται το παιχνίδι. Επιστρέφει την αρχική κατάσταση του Board.

### **Παίξιμο φύλλου**

`PUT /board/card/{id}`

<br> Ορίζει το ποιά κάρτα θα παίξει ο κάθε παίκτης.
###
### <u>Player<u>

### **Λίστα παικτών**
`GET /player'

<br> Επιστρέφει τα usernames και τις θέσεις (Α ή Β) των ενεργών παικτών.
### **Ανάγνωση στοιχείων παίκτη**
`GET /player/{p}`

<br> Επιστρέφει τα στοιχεία p (Α ή Β) ή όλων των παικτών, αν παραληφθεί ο ορισμός συγκεκριμένου παίκτη.

### **Αρχικοποίηση στοιχείων παίκτη**
`POST /player/{p}`

<br> Ορίζει το όνομα του παίκτη και επιστρέφει το token που του αντιστοιχεί.

## <u>Status</u>
`GET /status/`

<br>Επιστρέφει τα δεδομένα του πίνακα game_status.

### **Επαναφορά παιχνιδιού**
`POST /reset` 

<br> Επαναφέρει τα πάντα στους πίνακες στην αρχική κατάσταση. (μηδενίζεται το σκορ, διαγράφονται οι παίκτες, το παιχνίδι ορίζεται ως μη ενεργό).

## <u>Πίνακες Βάσης Δεδομένων</u>

### 1. board
Περιέχει πληροφορίες σχετικά με την κατάσταση του ταμπλό του παιχνιδιού.

| Attribute | Description | Values |
| :--- | :--- | :--- |
| **card_id** | Κάρτα που κινείται | `1`,`2`,`3`,`4`,`5`,`6`,.... |
| **pos** | Ορίζει την τοποθεσία της κάρτας | `deck`, `hand_A`, `hand_B`, `table`, `pile_A`, `pile_B` |
| **weight** | Θέση κάρτας στη στοίβα | `0`,`1`,`2`,`3`,`4`,`5`... |

### 2. deck
Περιέχει τις πληροφορίες για την τράπουλα.

| Attribute | Description | Values |
| :--- | :--- | :--- |
| **card_id** | Μοναδικό ID κάρτας | `1`,`2`,`3`,`4`,`5`,`6`,.... |
| **card_rank** | Αξία κάρτας | `A`, `2`, `3`, ..., `K` |
| **card_suit** | Σύμβολο κάρτας | `Club`, `Diamond`, `Heart`, `Spade` |

### 3. players
Στοιχεία και κατάσταση των παικτών.

| Attribute | Description | Values |
| :--- | :--- | :--- |
| **username** | Oνομα παίκτη | `varchar` |
| **player** | Ορίζει αν ο παίκτης είναι ο A ή ο B | `A`, `B` |
| **token** | Μοναδικό token | `hex` |
| **last_action** | Timestamp | `timestamp` |
| **score** | Ορίζει το σκορ του παίκτη | `int` |
| **kseres** | Ορίζει τον αριθμό ξερών του παίκτη | `int` |


### 4. game_status
Η συνολική κατάσταση της εξέλιξης του παιχνιδιού.

| Attribute | Description | Values |
| :--- | :--- | :--- |
| **status** | Φάση του παιχνιδιού | `not active`, `initialized`, `started`, `ended`, `aborted` |
| **p_turn** | Σειρά παίκτη | `'A'`, `'B'` |
| **result** | Νικητής | `'A'`, `'B'`, `'D'` (draw) |
| **last_change** | Timestamp | `timestamp` |

## <u>Περιγραφή Frontend</u>

### 1. HTML

`main_menu.html περιέχει`
- `Κουμπί εισόδου που μας μεταφέρει στην δήλωση ονόματος και επιλογή παικτη Α ή Β.`
- `Κουμπι που εξηγεί τους κανονες του παιχνιδιού.`
- `Πάνω δεξιά κουμπί που αλλάζει το user interface απο light σε dark mode.`
- `Κάτω αριστερά ένα κουμπι που μεταφερει στο github repository της εφαρμογής.`

### 2. JavaScript

| Function | Description |
| :--- | :--- |
| **login_to_game()** | σύνδεση παιχνιδιού | 
| **login_result()** | αποτέλεσμα αν εγινε επιτυχής η σύνδεση | 
| **game_status_update()** | ενημερώνεται σε καθε γύρω ώστε να σηματοδοτήσει το τέλος παιχνιδιού | 
| **update_status(data)** | ενημερώνει αν συνεχίζει το παιχνίδι ή ολοκληρώθηκε | 
| **handleEndOfGame(result)** | βρίσκει ποις παίκτης είναι ο νικητής κτλ |
| **startTimer(seconds)** | μετα απο 60 δεύτερα ο παίκτης χάνει την σειρά του |
| **stopTimer()** | σταματάει το timer αν ο παίκτης προβεί σε κίνηση |
| **fill_board()** | γεμίζει το board|
| **draw_board(data)** | απεικόνιση board | 
| **create_card_img(card, suitMap)** | εικόνα για κάθε φύλλο |
| **update_info()** | ενημερώνει για το αν ο παίκτης ειναι σε σύνδεση |
| **update_turn_ui(turn)** | ενημερώνει ποιος παίκτης έχει σειρά |
| **update_player_names()** | ενημέρωση ονόματος παικτών |
| **resetGame()** | επαναφορά παιχνιδιού εκκαθάριση db | 
| **playCard(cardId)** | αποστολή κίνησης παίκτη |
| **login_error(data)** | pop-up που ενημερώνει για σφαλμα στην είσοδο |
| **winner()** | pop-up μήνυμα στον παίκτη που νίκησε |
| **loser()** | pop-up μήνυμα στον παίκτη που έχασε|
| **draw()** | pop-up μήνυμα που αναγράφει οτι υπήρξε ισοπαλία|













